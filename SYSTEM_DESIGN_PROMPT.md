# IMS Venue Reservation System - Complete System Design Prompt

## System Overview

Design and build a **Venue Reservation Management System** - an admin-focused web application for managing venue bookings, reservations, and event scheduling. This is an internal administrative tool for staff to manage venue availability, create reservations, track events, and view venue calendars.

## Technology Stack

- **Framework**: Next.js 15.3.2 (App Router)
- **Language**: TypeScript 5
- **Styling**: Tailwind CSS 4
- **Backend/Database**: Firebase (Firestore for data, Firebase Auth for authentication)
- **UI Icons**: React Icons (Feather Icons - `react-icons/fi`)
- **Date Handling**: date-fns 4.1.0
- **React Version**: 19.0.0

## Core Data Models

### Venue Type
```typescript
{
  id: string;              // Auto-generated by Firestore
  name: string;            // Required - Venue name
  capacity?: number;       // Optional - Maximum capacity
  description?: string;    // Optional - Venue description
  imageUrl?: string;       // Optional - URL to venue image
}
```

### Staff Member
```typescript
{
  id: string;              // Auto-generated by Firestore
  name: string;            // Staff member name
  email: string;           // Staff email
  role: string;            // Staff role/position
}
```

### Reservation Status
One of: `'Processing'` | `'Reserved'` | `'Confirmed'` | `'Cancelled'`

### Reservation
```typescript
{
  id: string;                    // Auto-generated by Firestore
  venueId: string;               // Reference to venue
  venueName: string;             // Cached venue name for display
  department: string;            // Department making reservation
  eventTitle: string;            // Name/title of the event
  reservedBy: string;            // Person's name who made reservation
  email: string;                 // Contact email
  startDate: string;             // ISO date string (YYYY-MM-DD)
  endDate: string;               // ISO date string (can be same as startDate)
  startTime: string;             // Time string (HH:MM format)
  endTime: string;               // Time string (HH:MM format)
  status: ReservationStatus;    // Current status
  receivedBy: string;            // Staff member ID who received the reservation
  createdAt: Timestamp;          // Firestore server timestamp
  updatedAt: Timestamp;          // Firestore server timestamp
}
```

## Application Architecture

### Layout Structure

The application uses a consistent **Admin Layout** pattern across all pages:

1. **Sidebar Navigation** (Left side, fixed)
   - Dark gray background (`bg-gray-800`)
   - Fixed width: 256px (`w-64`)
   - Collapsible on mobile/tablet
   - Navigation items:
     - Dashboard (Home icon) - `/`
     - Reservations (Calendar icon) - `/reservations`
     - New Reservation (Plus icon) - `/new-reservation`
     - Venues (Settings icon) - `/venues`
   - Active route highlighted in blue (`bg-blue-600`)

2. **Header** (Top, sticky)
   - White background with shadow
   - Height: 64px (`h-16`)
   - Contains:
     - Hamburger menu button (mobile only)
     - System title: "Venue Reservation System"
     - Notification bell icon
     - User profile section (Admin badge with user icon)

3. **Main Content Area**
   - Flexible container with padding
   - Max width: 7xl (1280px)
   - Scrollable content area
   - Background: Light gray (`bg-gray-100`)

### Page Structure

#### 1. Dashboard (`/`)
**Purpose**: Overview of today's events and upcoming reservations

**Components**:
- **Today's Events Card** (Left side)
  - Lists all events scheduled for today
  - Each event shows:
    - Event title
    - Time range (start - end)
    - Venue name
  - Blue left border accent
  - Displays "No events scheduled for today" if empty

- **Quick Stats Card** (Right side)
  - Two stat boxes:
    - Today's Events count (blue theme)
    - Upcoming Events count (green theme)

- **Upcoming Events Table** (Full width below)
  - Table columns:
    - Event (title + department)
    - Venue
    - Date (formatted as "MMM d, yyyy")
    - Time
    - Status (color-coded badge)
  - Shows top 5 upcoming events
  - Status badges:
    - Confirmed: Green (`bg-green-100 text-green-900`)
    - Cancelled: Red (`bg-red-100 text-red-900`)
    - Processing: Yellow (`bg-yellow-100 text-yellow-900`)
    - Reserved: Blue (`bg-blue-100 text-blue-900`)

#### 2. Reservations List (`/reservations`)
**Purpose**: View and manage all reservations

**Components**:
- **Reservations Table**
  - Columns:
    - Event (title + department)
    - Venue
    - Date(s) (single date or range)
    - Time (start - end)
    - Reserved By (name + email)
    - Status (color-coded badge)
    - Actions (Edit icon + Delete icon)
  - Edit button links to `/reservations/edit/[id]`
  - Delete button opens confirmation modal
  - Empty state: "No reservations found. Create a new reservation to get started."

- **Delete Confirmation Modal**
  - Dark overlay background
  - White modal card
  - Confirmation message
  - Cancel and Delete buttons
  - Loading state during deletion

#### 3. New Reservation (`/new-reservation`)
**Purpose**: Create a new venue reservation

**Components**:
- **Reservation Form** (White card with shadow)
  - Two-column grid layout (responsive)
  - Form fields:
    1. **Venue** (Dropdown) - Required, populated from venues collection
    2. **Department** (Text input) - Required
    3. **Event Title** (Text input) - Required
    4. **Reserved By** (Text input) - Required, person's name
    5. **Email Address** (Email input) - Required
    6. **Received By** (Dropdown) - Required, populated from staff collection
    7. **Start Date** (Date picker) - Required
    8. **End Date** (Date picker) - Required, min date = start date
    9. **Start Time** (Time picker) - Required
    10. **End Time** (Time picker) - Required
    11. **Status** (Dropdown) - Default: "Reserved", options: Reserved, Processing, Confirmed, Cancelled
  - Auto-sync: When start date changes, end date automatically updates to match (for single-day events)
  - Success message: Green alert banner (auto-dismisses after 3 seconds)
  - Error message: Red alert banner
  - Submit button: Blue, disabled during loading
  - Form validation: All required fields must be filled
  - **Conflict Detection**: Before creating, system checks for time conflicts:
    - Checks if any existing reservation for the same venue overlaps in date range
    - If dates overlap, checks if time ranges overlap
    - Throws error if conflict detected: "Time conflict: Another event is already scheduled for this venue during the selected time"

#### 4. Venues Management (`/venues`)
**Purpose**: Add new venues and view all venues

**Components**:
- **Add New Venue Form** (Top section)
  - White card with shadow
  - Form fields:
    1. **Venue Name** (Text input) - Required
    2. **Capacity** (Number input) - Optional
    3. **Description** (Textarea, 3 rows) - Optional
    4. **Image URL** (URL input) - Optional
  - Success/error messages
  - Submit button: "Add Venue"

- **All Venues Grid** (Bottom section)
  - Responsive grid: 1 column (mobile), 2 columns (tablet), 3 columns (desktop)
  - Each venue card:
    - Dark header (`bg-gray-800`) with venue name and location icon
    - White body with:
      - Capacity (if available) with users icon
      - Description (if available)
      - "View Details" link (blue, with arrow icon) to `/venues/[id]`
  - Empty state: "No venues found. Add a new venue to get started."

#### 5. Venue Details (`/venues/[id]`)
**Purpose**: View detailed information about a specific venue

**Components**:
- **Venue Information Card** (Top)
  - Venue name with location icon
  - Capacity (if available) with user icon
  - Description (if available)
  - Stats grid (2 columns):
    - Total Reservations (blue theme)
    - Days Reserved (green theme)

- **Venue Calendar** (Middle)
  - Calendar view showing current month
  - 7-column grid (Sunday through Saturday)
  - Days with reservations highlighted in blue (`bg-blue-100 border-blue-300`)
  - Clickable reserved dates (opens modal)
  - Empty days in white/gray

- **Reservations Table** (Bottom)
  - Similar to main reservations table
  - Shows only reservations for this venue
  - Columns: Event, Date(s), Time, Reserved By, Status, Actions
  - Edit button opens reservation details modal

- **Reservation Details Modal**
  - Opens when clicking reserved date or edit button
  - Shows:
    - If date clicked: All reservations for that date
    - If edit clicked: Full reservation details in grid layout
  - "Edit Reservation" button (links to edit page)
  - Close button

## Firebase Integration

### Configuration
- Uses environment variables for Firebase config:
  - `NEXT_PUBLIC_FIREBASE_API_KEY`
  - `NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN`
  - `NEXT_PUBLIC_FIREBASE_PROJECT_ID`
  - `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET`
  - `NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID`
  - `NEXT_PUBLIC_FIREBASE_APP_ID`

### Firestore Collections

1. **`venues`** - Stores venue information
2. **`staff`** - Stores staff member information
3. **`reservations`** - Stores all reservation records

### Service Functions

**Venue Services**:
- `getVenues()` - Fetch all venues
- `getVenueById(id)` - Fetch single venue
- `addVenue(venue)` - Create new venue

**Staff Services**:
- `getStaffMembers()` - Fetch all staff members

**Reservation Services**:
- `getReservations()` - Fetch all reservations (ordered by startDate, then startTime)
- `getReservationsByVenue(venueId)` - Fetch reservations for specific venue
- `getTodayReservations()` - Fetch reservations happening today
- `getUpcomingReservations()` - Fetch future reservations
- `addReservation(reservation)` - Create new reservation (with conflict checking)
- `updateReservation(id, data)` - Update existing reservation
- `deleteReservation(id)` - Delete reservation

**Timestamp Handling**:
- `createdAt` and `updatedAt` use Firestore `serverTimestamp()`
- Date fields stored as ISO strings (YYYY-MM-DD)
- Time fields stored as strings (HH:MM format)

## UI/UX Design Specifications

### Color Scheme
- **Primary Background**: Light gray (`bg-gray-100`)
- **Card Background**: White (`bg-white`)
- **Sidebar**: Dark gray (`bg-gray-800`)
- **Primary Action**: Blue (`bg-blue-600`, hover: `bg-blue-700`)
- **Success**: Green (`bg-green-100 text-green-900`)
- **Error**: Red (`bg-red-100 text-red-900`)
- **Warning**: Yellow (`bg-yellow-100 text-yellow-900`)
- **Text**: Black/dark gray for readability

### Typography
- Font: Geist (from Next.js font optimization)
- Headings: Bold, various sizes (text-2xl, text-xl, text-lg)
- Body: Regular weight, text-sm for secondary info

### Spacing & Layout
- Consistent padding: `p-4` or `p-6` on cards
- Gap spacing: `gap-6` for grids
- Margin bottom: `mb-4` or `mb-6` for sections
- Rounded corners: `rounded-lg` for cards, `rounded-md` for buttons
- Shadows: `shadow` for cards, `shadow-lg` for modals

### Interactive Elements
- Buttons: Rounded, with hover states and focus rings
- Form inputs: Border with focus ring (blue)
- Links: Blue color, hover darker blue
- Icons: React Icons Feather set, consistent sizing (20px default)
- Loading states: Disabled buttons with opacity reduction
- Modals: Dark overlay (50% opacity), centered white card

### Responsive Design
- Mobile-first approach
- Sidebar: Hidden on mobile, toggleable via hamburger menu
- Grid layouts: 1 column (mobile) → 2 columns (tablet) → 3 columns (desktop)
- Tables: Horizontal scroll on mobile
- Forms: Stack vertically on mobile, 2 columns on desktop

## Key Features & Functionality

### 1. Conflict Detection
- When creating a reservation, system automatically checks for conflicts
- Compares date ranges and time ranges for the same venue
- Prevents double-booking

### 2. Date Handling
- Supports single-day events (startDate = endDate)
- Supports multi-day events (date ranges)
- Calendar view highlights all days in a reservation range
- Date formatting: "MMM d, yyyy" (e.g., "Jan 15, 2024")

### 3. Status Management
- Four status levels with visual distinction
- Color-coded badges throughout the application
- Status can be set during reservation creation

### 4. Real-time Data
- All data fetched from Firestore on component mount
- No real-time subscriptions (data refreshes on page navigation)

### 5. Form Validation
- Client-side validation for required fields
- Email format validation
- Date range validation (end date >= start date)
- Server-side conflict checking

### 6. User Experience
- Loading states for async operations
- Success/error feedback messages
- Confirmation modals for destructive actions
- Empty states with helpful messages
- Responsive design for all screen sizes

## Component Architecture

### Client Components (use 'use client')
- All interactive components are client components
- Server components only for layout and page wrappers

### Component Hierarchy
```
RootLayout
└── AdminLayout
    ├── Sidebar
    ├── Header
    └── Main Content (varies by page)
        ├── DashboardContent
        ├── ReservationForm
        ├── ReservationList
        ├── VenueList
        ├── VenueForm
        └── VenueDetails
```

## Routing Structure

- `/` - Dashboard
- `/reservations` - All Reservations
- `/new-reservation` - Create Reservation
- `/venues` - Venue Management
- `/venues/[id]` - Venue Details (dynamic route)

## Error Handling

- Try-catch blocks around all async operations
- Error messages displayed in red alert banners
- Console logging for debugging
- Graceful fallbacks for missing data

## Accessibility Considerations

- Semantic HTML elements
- Icon + text labels for clarity
- Keyboard navigation support
- Focus states on interactive elements
- ARIA labels where appropriate (can be enhanced)

## Future Enhancement Opportunities

- Real-time updates with Firestore listeners
- User authentication and role-based access
- Email notifications for reservations
- Calendar export functionality
- Advanced filtering and search
- Reservation editing page (currently only link exists)
- Bulk operations
- Reports and analytics
- Venue image upload (currently URL only)

---

## Implementation Notes

1. **Date Format**: All dates stored as ISO strings (YYYY-MM-DD) for consistency
2. **Time Format**: Times stored as strings in HH:MM format
3. **Timestamps**: Use Firestore serverTimestamp() for created/updated times
4. **ID Generation**: Firestore auto-generates document IDs
5. **Caching**: Venue names cached in reservation documents for faster display
6. **Mobile Menu**: Sidebar toggles via state management in AdminLayout

This system is designed as an internal admin tool for efficient venue and reservation management with a clean, professional interface suitable for staff use.

